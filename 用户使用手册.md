# 中国族谱管理系统用户使用手册

## 1. 系统概述

中国族谱管理系统是一个基于Laravel框架开发的独立中国特色族谱管理平台，专为中国家族文化设计，支持字辈管理、中国传统亲属关系、宗族组织结构、祠堂信息、迁徙记录、墓地信息和家规家训等核心功能。

### 1.1 系统特点

- **中国传统特色**：支持字辈管理、中国传统亲属称谓、宗族组织结构等中国特有的族谱元素
- **传统风格界面**：采用中国传统红色主题和纸张样式设计
- **独立开发架构**：不依赖任何第三方族谱系统，完全自主开发
- **模块化架构**：独立的功能模块，便于管理和扩展
- **中文本地化**：全中文界面，符合中国用户使用习惯
- **多用户支持**：支持多个用户管理各自的家族数据，确保数据隔离

## 2. 安装指南

### 2.1 环境要求

- PHP 8.0+（推荐8.1或更高版本）
- MySQL 8.0+数据库
- Composer（PHP依赖管理工具）
- Node.js和NPM（前端依赖管理工具，可选）

### 2.2 安装步骤

#### 2.2.1 系统安装

1. 下载或克隆中国族谱管理系统源代码
2. 进入项目根目录
3. 运行以下命令安装PHP依赖：
   ```bash
   composer install
   ```
4. 运行以下命令安装前端依赖（可选）：
   ```bash
   npm install
   ```
5. 复制环境变量配置文件：
   ```bash
   cp .env.example .env
   ```
6. 编辑`.env`文件，配置数据库连接信息：
   ```env
   DB_CONNECTION=mysql
   DB_HOST=127.0.0.1
   DB_PORT=3306
   DB_DATABASE=family_tree
   DB_USERNAME=root
   DB_PASSWORD=your_password
   ```
7. 生成应用密钥：
   ```bash
   php artisan key:generate
   ```
8. 运行数据库迁移：
   ```bash
   php artisan migrate
   ```

### 2.3 快速启动

系统提供了一键启动脚本，可自动完成所有安装和启动步骤：

#### Windows系统

1. 双击运行项目根目录下的`启动.bat`文件
2. 等待脚本完成所有操作
3. 在浏览器中访问：http://localhost:8000

#### Linux/Mac系统

1. 打开终端，进入项目根目录
2. 运行以下命令：
   ```bash
   chmod +x 启动.sh
   ./启动.sh
   ```

### 2.4 系统配置

1. 首次访问系统时，点击「注册」按钮创建管理员账号
2. 使用新创建的管理员账号登录系统
3. 进入「设置」页面，配置系统参数（如网站标题、联系方式等）

## 3. 主要功能介绍

### 3.1 家族成员管理

家族成员管理是系统的核心功能，用于管理家族成员的基本信息和家庭关系。

#### 3.1.1 添加家族成员

1. 登录系统后，点击顶部导航栏的「家族成员」→「添加成员」
2. 填写基本信息（姓名、性别、出生日期、去世日期等）
3. 设置家庭关系（父亲、母亲、配偶等）
4. （可选）上传照片或添加其他详细信息
5. 点击「保存」按钮完成添加

#### 3.1.2 编辑家族成员

1. 在家族成员列表中找到要编辑的成员
2. 点击「编辑」按钮
3. 修改相关信息
4. 点击「保存」按钮完成更新

#### 3.1.3 查看家族成员详情

1. 在家族成员列表中找到要查看的成员
2. 点击成员姓名进入详情页面
3. 查看成员的基本信息、家庭关系和其他相关记录

### 3.2 字辈管理功能

字辈管理是中国传统族谱的核心功能之一，用于记录家族成员的字辈排行。

#### 3.2.1 设置人员字辈

1. 进入人员详情页面
2. 点击「编辑」按钮
3. 在「字辈信息」部分选择或输入字辈信息（如"光"、"明"等）
4. 设置字辈的世代
5. 保存更改

#### 3.2.2 创建字辈库

1. 点击顶部导航栏的「字辈管理」→「字辈库」
2. 点击「创建字辈库」按钮
3. 填写字辈库名称和字辈序列
4. 保存设置

#### 3.2.3 查看家族树

1. 在家族成员列表或详情页面点击「查看家族树」
2. 系统将以可视化方式展示家族关系
3. 使用鼠标拖动、缩放等操作浏览家族树

### 3.3 中国传统亲属关系

系统自动计算并显示中国传统的亲属关系称谓，如父亲、母亲、兄弟、姐妹、叔叔、姑姑等。

#### 3.3.1 查看亲属关系

1. 进入人员详情页面
2. 滚动到「亲属关系」部分
3. 系统将显示该人员的所有亲属及其关系称谓

#### 3.3.2 亲属关系查询

1. 点击顶部导航栏的「亲属关系」→「关系查询」
2. 选择两个家族成员
3. 点击「查询关系」按钮
4. 系统将显示两人之间的亲属关系称谓

### 3.4 宗族组织结构管理

用于记录和管理家族的组织结构，包括家族分支和派系。

#### 3.4.1 设置人员宗族信息

1. 进入人员编辑页面
2. 在「宗族信息」部分选择所属的宗族和分支
3. 保存更改

### 3.5 祠堂信息管理

记录家族祠堂的基本信息、历史沿革等内容。

#### 3.5.1 添加祠堂信息

1. 进入「管理」→「祠堂信息管理」页面
2. 点击「添加祠堂」按钮
3. 填写祠堂名称、地址、建立时间等信息
4. 保存祠堂信息

#### 3.4.2 关联人员与祠堂

1. 进入人员编辑页面
2. 在「其他信息」部分找到「所属祠堂」字段
3. 选择该人员所属的祠堂
4. 保存更改

### 3.6 迁徙与祖籍记录

记录家族成员的祖籍信息和迁徙历史。

#### 3.6.1 设置人员祖籍信息

1. 进入人员编辑页面
2. 在「迁徙与祖籍」部分找到「祖籍」字段
3. 输入祖籍地址
4. 保存更改

#### 3.6.2 添加迁徙记录

1. 进入人员详情页面
2. 点击「迁徙记录」标签
3. 点击「添加迁徙记录」按钮
4. 填写迁徙时间、出发地、目的地和原因
5. 保存迁徙记录

### 3.7 墓地信息管理

记录家族成员的墓地信息，包括位置、坐标、碑文等。

#### 3.7.1 设置墓地信息

1. 进入人员编辑页面
2. 在「墓地信息」部分填写墓地位置、坐标、碑文等信息
3. （可选）上传墓地照片
4. 保存更改

### 3.8 家规家训管理

记录和管理家族的家规家训内容。

#### 3.8.1 添加家规家训

1. 点击顶部导航栏的「家规管理」→「添加家规」
2. 填写家规名称、内容、分类等信息
3. 保存家规家训

#### 3.8.2 查看家规家训

1. 点击顶部导航栏的「家规管理」→「家规列表」
2. 浏览或搜索家规家训内容
3. 点击家规名称查看详细内容

### 3.9 宗族活动记录

记录家族的重要活动，如祭祀、聚会等。

#### 3.9.1 添加宗族活动

1. 点击顶部导航栏的「活动管理」→「添加活动」
2. 点击「添加活动」按钮
3. 填写活动名称、时间、地点、参与者等信息
4. 保存活动记录

## 4. 界面操作指南

### 4.1 中国传统风格主题

系统采用具有中国传统特色的界面设计：

- 中国红色主题色调
- 纸张样式的背景设计
- 传统中国装饰元素
- 优化的中文排版

### 4.2 导航菜单

系统导航菜单包含以下主要功能模块：

- 「首页」：系统概览和快捷入口
- 「家族成员」：家族成员的增删改查和家族树查看
- 「字辈管理」：字辈库管理和字辈分配
- 「亲属关系」：亲属关系查询和计算
- 「宗族管理」：宗族组织结构和分支管理
- 「祠堂管理」：祠堂信息记录和管理
- 「迁徙管理」：迁徙记录和路线图
- 「墓地管理」：墓地信息和地图
- 「家规管理」：家规家训记录和管理
- 「活动管理」：宗族活动记录和管理
- 「设置」：系统设置和个人信息管理

### 4.3 人员详情页面

人员详情页面包含以下信息：

- 基本信息：姓名、性别、出生日期、去世日期等
- 家庭关系：父亲、母亲、配偶、子女等
- 字辈信息：所属字辈和世代
- 宗族信息：所属宗族和分支
- 迁徙记录：历史迁徙信息
- 墓地信息：墓地位置和照片

## 5. 数据管理

### 5.1 数据备份

1. 进入「设置」→「数据备份」页面
2. 选择要备份的数据类型
3. 点击「备份」按钮生成备份文件
4. 下载备份文件保存到安全位置

### 5.2 数据导入

1. 进入「设置」→「数据导入」页面
2. 选择备份文件
3. 点击「导入」按钮
4. 等待导入完成

## 6. 常见问题解答

### 6.1 系统无法启动怎么办？

1. 检查PHP是否正确安装（版本8.0+）
2. 检查数据库连接信息是否正确
3. 确保已运行`php artisan migrate`创建数据库表
4. 检查是否已生成应用密钥（`php artisan key:generate`）

### 6.2 无法添加家族成员怎么办？

1. 检查是否已登录系统
2. 确保已填写所有必填字段
3. 检查数据库连接是否正常

### 6.3 家族树显示不完整怎么办？

1. 检查家族成员之间的关系是否正确设置
2. 确保父亲、母亲等关系字段已正确填写
3. 尝试刷新页面或重新登录系统

### 6.4 中文显示不完整怎么办？

1. 确保浏览器语言设置为「简体中文」
2. 清除浏览器缓存后重新访问
3. 检查系统字体是否支持中文显示

### 6.3 字辈自动分配不工作怎么办？

1. 检查是否设置了默认字辈库
2. 检查自动分配规则是否正确
3. 确保新创建的人员有完整的家庭关系

### 6.4 传统风格主题不生效怎么办？

1. 确保已启用「传统中国风格主题模块」
2. 检查`chinese_style.css`文件是否正确复制
3. 清除浏览器缓存后重新访问

## 7. 技术支持

- 文档支持：参考本用户使用手册
- 技术支持：联系系统开发团队获取专业技术支持

## 8. 更新与维护

### 8.1 系统更新

1. **备份数据**：在更新前请务必备份数据库和关键文件
2. **获取最新代码**：如果使用Git管理，运行`git pull origin main`获取最新代码
3. **更新依赖**：运行`composer install`更新PHP依赖
4. **更新前端资源**：运行`npm install && npm run prod`更新前端资源
5. **运行数据库迁移**：运行`php artisan migrate`应用数据库结构变更
6. **清理缓存**：运行`php artisan cache:clear`和`php artisan view:clear`清理系统缓存

### 8.2 系统维护

- **定期备份**：定期备份数据库和用户数据（推荐使用数据库自动备份工具）
- **日志检查**：查看`storage/logs/`目录下的日志文件，及时处理错误
- **缓存清理**：定期运行`php artisan cache:clear`清理缓存
- **临时文件清理**：定期清理`storage/app/tmp/`目录下的临时文件
- **数据库优化**：定期使用MySQL的`OPTIMIZE TABLE`命令优化数据库表

---

© 2025 中国族谱管理系统开发团队 版权所有
